---
multiTenantAuth:
  enabled: false
  deployCredentials: false

loki:
  # By default, Loki offers no authentication. It just expects the `X-Scope-OrgID`
  # HTTP header to be set to indicate which tenant's logs are these. To enable
  # minimal security, you can configure the gateway to route traffic through multi-tenant-proxy
  # to do HTTP basicAuth and overwriting the tenant id header
  loki:
    compactor:
      retention_enabled: true
      delete_request_store: azure
    schemaConfig:
      # Beware when Changing this config on an existing Loki
      # Doc is here: https://grafana.com/docs/loki/latest/storage/#upgrading-schemas
      configs:
        - from: 2024-04-01
          object_store: s3
          store: tsdb
          schema: v13
          index:
            prefix: index_
            period: 24h
    storage:
      type: azure
      bucketNames:
        # 'Blob service' 'Container' name
        chunks: my-container-name
        ruler: my-container-name
        admin: my-container-name
      azure:
        # 'Storage acccunt' name
        accountName: my-account-name
        # 'Storage account' 'Access key'
        accountKey: my-account-key

  # Loki consists of multiple microservices. Gateway is an nginx-based proxy
  # that routes requests to correct microservices. It should be consider the entry point
  # of your Loki deployment.
  gateway:
    replicas: 3

  # Shared configuration for all components
  # key _shared_config does not actually exist in the apps values.yaml
  # We're using it in other keys through yaml anchors
  _shared_config: &shared-conf
    persistence:
      storageClass: default

  # giantswarm.io/machine-pool ids (hon60) below reference the node pool ids
  # replace them with your ids of your node pools

  write: *shared-conf

  read: *shared-conf
